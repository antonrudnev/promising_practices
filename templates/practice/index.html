{% extends 'base.html' %}

{% block title %}Promising Practices{% endblock %}

{% block content %}
    <table class="table my-2">
    <thead class="thead-light">
        <tr>
            <th class="align-middle" scope="col">ID</th>
            <th class="align-middle" scope="col" style="width: 60%">Title</th>
            <th class="align-middle" scope="col" style="width: 40%">Intervention</th>
            <th class="align-middle" scope="col"><a class="btn btn-success" href="/practice/create?page={{ page }}&query={{ query }}"style="width: 100px;">Create</a></th>
        </tr>
    </thead>
    <tbody>
        {% for practice in practices %}
            <tr>
                <th scope="row">{{ practice.id }}</th>
                <td>{{ practice.title }}</td>
                <td>{{ practice.name_of_intervention }}</td>
                <td>
                    {% if practice.status == "APPROVED" %}
                        {% set status_btn = "btn-outline-success" %}
                    {% elif practice.status == "REVOKED" %}
                        {% set status_btn = "btn-warning" %}
                    {% else %}
                        {% set status_btn = "btn-secondary" %}
                    {% endif %}
                    <a class="btn {{ status_btn }}" href="/practice/{{ practice.id }}?page={{ page }}&query={{ query }}" style="width: 100px;">{{ practice.status|capitalize }}</a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
    </table>
    <ul class="pagination justify-content-center">
        <li class="page-item {% if page <= 0 %}disabled{% endif %}">
            <a class="page-link" href="/?page={{ page - 1 }}&query={{ query }}" tabindex="-1">Previous</a>
        </li>
        {% for p in pager %}
            {% if p is number %}
                {% if p == page %}
                    <li class="page-item active"><a class="page-link"> {{ p + 1 }} </a></li>
                {% else %}
                    <li class="page-item "><a class="page-link" href="/?page={{ p }}&query={{ query }}"> {{ p + 1 }} </a></li>
                {% endif %}
            {% else %}
                <li class="page-item disabled"><a class="page-link"> {{ p }} </a></li>
            {% endif %}
        {% endfor %}
        <li class="page-item {% if page >= pager[-1] %}disabled{% endif %}">
            <a class="page-link" href="/?page={{ page + 1 }}&query={{ query }}">Next</a>
        </li>
    </ul>
{% endblock %}


