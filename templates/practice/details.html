{% extends 'base.html' %}

{% block title %}Practice # {{ practice.id }}{% endblock %}

{% block content %}
    <table class="table my-2">
        <thead class="thead-light">
            <tr>
                <th scope="col" style="width: 10%">Field</th>
                <th scope="col" style="width: 90%">Value</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">ID</th>
                <td>{{ practice.id }}</td>
            </tr>
            <tr>
                {% if practice.status == "APPROVED" %}
                    {% set status_badge = "badge-success" %}
                {% elif practice.status == "REVOKED" %}
                    {% set status_badge = "badge-warning" %}
                {% else %}
                    {% set status_badge = "badge-secondary" %}
                {% endif %}
                <th class="align-middle" scope="row">Status</th>
                <th class="align-middle" scope="row">
                    <div class="btn-toolbar justify-content-between">
                        <h5 class="mt-1"><span class="mt-1 badge {{ status_badge }}">{{ practice.status|capitalize }}</span></h5>
                        <form method="post">
                            <input type="hidden" name="status" value="{{ practice.status }}">
                            {% if practice.status == "APPROVED" %}
                                <button class="btn btn-outline-warning" style="width: 90px;" type="submit">Revoke</button>
                            {% else %}
                                <button class="btn btn-outline-success" style="width: 90px;" type="submit">Approve</button>
                            {% endif %}
                        </form>
                    </div>
                </th>
            </tr>
            <tr>
                <th scope="row">Title</th>
                <td>{{ practice.title }}</td>
            </tr>
            <tr>
                <th scope="row">Name of Intervention</th>
                <td>{{ practice.name_of_intervention }}</td>
            </tr>
            <tr>
                <th scope="row">Summary</th>
                <td>{{ practice.summary }}</td>
            </tr>
            <tr>
                <th scope="row">Target Population</th>
                <td>{{ practice.target_population }}</td>
            </tr>
            <tr>
                <th scope="row">Location</th>
                <td>{{ practice.location }}</td>
            </tr>
            <tr>
                <th scope="row">Evaluation</th>
                <td>{{ practice.evaluation }}</td>
            </tr>
            <tr>
                <th scope="row">State</th>
                <td>
                    {% for state in practice.state %}
                        <span class="badge {% if state in states %}badge-info{% else %}badge-danger{% endif %}">{{ state }}</span>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th scope="row">Citation</th>
                <td>{{ practice.citation }}</td>
            </tr>
            <tr>
                <th scope="row">Intervention Goal</th>
                <td>
                    {% for goal in practice.intervention_goal %}
                        <span class="badge {% if goal in intervention_goals %}badge-info{% else %}badge-danger{% endif %}">{{ goal }}</span>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th scope="row">Implementers</th>
                <td>
                    {% for implementer in practice.implementers %}
                        <span class="badge {% if implementer in implementers %}badge-info{% else %}badge-danger{% endif %}">{{ implementer }}</span>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th scope="row">County</th>
                <td>{{ practice.county }}</td>
            </tr>
            <tr>
                <th scope="row">FIPS</th>
                <td>{{ practice.fips }}</td>
            </tr>
            <tr>
                <th scope="row">Program Components</th>
                <td>
                    {% for component in practice.program_components %}
                        <span class="badge {% if component in program_components %}badge-info{% else %}badge-danger{% endif %}">{{ component }}</span>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th scope="row">Population</th>
                <td>
                    {% for population in practice.population %}
                        <span class="badge {% if population in populations %}badge-info{% else %}badge-danger{% endif %}">{{ population }}</span>
                    {% endfor %}
                </td>
            </tr>
        </tbody>
    </table>

    <div class="btn-toolbar justify-content-between my-4" role="toolbar">
        <div role="group">
            <a class="btn btn-secondary mr-2" style="width: 90px;" href="/?page={{ page }}&query={{ query }}">Back</a>
            <a class="btn btn-primary" style="width: 80px;" href="/practice/{{ practice.id }}/edit?page={{ page }}&query={{ query }}">Edit</a>
        </div>
        <a class="btn btn-outline-danger my-sm-2" style="width: 90px;" href="{{ url_for('practice.delete', id=practice.id, title=practice.title, page=page, query=query) }}">Delete</a>
    </div>
{% endblock %}